<!DOCTYPE html>
<html lang="en">
<head>

    <script
            src="https://code.jquery.com/jquery-3.3.1.js"
            integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
            crossorigin="anonymous"></script>


    <meta charset="UTF-8">
    <title>calculator</title>

    <style>

        .total {
            width: 30%;
            border-style: groove;
        }

        .circularIconsArea:after {
            content: "";
            display: block;
            clear: both;

        }

        .exit {
            float: left;
            width: 10%;
        }

        .dash {
            float: left;
            width: 10%;
        }

        .expand {
            float: left;
            width: 10%;
        }

        .blankInIconsArea {
            float: left;
            width: 70%;
        }

        .results:after {
            content: "";
            display: block;
            clear: both;
        }

        .firstRow:after {
            content: "";
            display: block;
            clear: both;
        }

        .AC {
            float: left;
            width: 25%;
        }

        .plusminus {
            float: left;
            width: 25%
        }

        .percent {
            float: left;
            width: 25%;
        }

        .divider {
            float: left;
            width: 25%;
        }

        .secondRow:after {
            content: "";
            display: block;
            clear: both;
        }

        .seven {
            float: left;
            width: 25%;
        }

        .eight {
            float: left;
            width: 25%;
        }

        .nine {
            float: left;
            width: 25%;
        }

        .multiplier {
            float: left;
            width: 25%;
        }

        .thirdRow:after {
            content: "";
            display: block;
            clear: both;
        }

        .four {
            float: left;
            width: 25%;
        }

        .five {
            float: left;
            width: 25%;
        }

        .six {
            float: left;
            width: 25%;
        }

        .minus {
            float: left;
            width: 25%;
        }

        .fourthRow:after {
            content: "";
            display: block;
            clear: both;
        }

        .one {
            float: left;
            width: 25%;
        }

        .two {
            float: left;
            width: 25%;
        }

        .three {
            float: left;
            width: 25%;
        }

        .plus {
            float: left;
            width: 25%;
        }

        .fifthRow:after {
            content: "";
            display: block;
            clear: both;
        }

        .zero {
            float: left;
            width: 50%;

            text-align: left;

        }

        .dot {
            float: left;
            width: 25%;

            font-weight: bold;

        }

        .equal {
            float: left;
            width: 25%;
        }

        .dotCircle {
            height: 15px;
            width: 15px;

            border-radius: 50%;
            display: inline-block;
            text-align: center;

            padding: 2px;
            margin: 8px;
        }

        .exit {
            background-color: #ff0000;

        }

        .exitText {
            font-size: 90%;
        }

        .dash {
            background-color: #ffc53f;

        }

        .dashText {
            font-size: 100%;
            text-align: center;
        }

        .expand {
            background-color: #38bf00;
            text-align: center;

        }

        .expandText {
            font-size: 90%;
            text-align: center;
        }

        .circularIconsArea {
            background-color: #969696;
            opacity: 0.8;

        }

        .results {
            background-color: #969696;
            opacity: 0.8;

            height: 30px;

            text-align: right;
            line-height: 1.8;
            color: white;
            font-weight: lighter;
            font-size: 55px;

            padding-right: 20px;
            padding-bottom: 60px;
        }

        .textWhite {
            color: white;
            background-color: #ff8000;
            opacity: 0.8;

            line-height: 1.8;

            font-size: 20px;

            padding-top: 10px;
            padding-bottom: 10px;

        }

        .textBlack {
            color: black;

            line-height: 1.8;

            font-size: 20px;

            padding-top: 10px;
            padding-bottom: 10px;

        }

        .gray1 {
            background-color: #dddddd;
            opacity: 1;
        }

        .gray2 {
            background-color: #dddddd;
            opacity: 0.7;

        }

        .textCentered {
            text-align: center;
        }

        .btnBorder {

        }


    </style>


    <script>


        let operand1 = 0;
        let operand2 = 0;
        let operator = null;


        $(function () {

            /*
                let test = /(\d)+[.](\d)+/;
                console.log(test.test("123.0"));    // true
                console.log(test.test("123"));      // false

            */


            //원형 아이콘의 텍스트가 처음에 보이지 않도록 설정.
            $(".dotText").hide();

            //원형 아이콘 위에 마우스가 위치하면 아이콘의 텍스트가 나타나도록 설정.
            $(".dotCircle").mouseenter(function () {
                $(".dotText").show()
                //등장했던 텍스트가 다시 사라지도록 설정.
            }).mouseleave(function () {
                $(".dotText").hide();
            });

            //숫자가 입력되면 AC가 C로 변해야 한다.
            $(function () {
                if ($(".results").text() != 0) {
                    $(".ACVal").text("C");
                } else if ($(".results").text == 0) {
                    $(".ACVal").text("AC");
                }

            });

            //숫자 버튼이 눌리면 이를 갱신해 가면서 저장해 두어야 한다.
            $(".numBtn").click(function () {

                //아직 입력된 연산자가 없다면.
                if (operator == null) {

                    //operand1의 소수점 이하가 존재하지 않는 경우.
                    let testRegex = /(\d)+[.](\d)+/;

                    if (!testRegex.test(operand1)) {
                        operand1 = (10 * parseInt(operand1)) + parseInt(this.val());

                    } else {
                        operand1 = (10 * parseFloat(operand1)) + parseFloat(this.val());
                    }

                    $(".results").text(operand1);


                }
                //이미 입력된 연산자 존재.
                else{
                    let testRegex = /(\d)+[.](\d)+/;

                    if(!testRegex.test(operand2)){
                        operand2 = (10 * parseInt(operand2)) + parseInt(this.val());

                    }else{
                        operand2 = (10 * parseFloat(operand2)) + parseFloat(this.val());
                    }

                    $(".results").text(operand2);


                }


            })


        });


    </script>
</head>
<body>
<div class="total">

    <div class="circularIconsArea">
        <div class="exit dotCircle">
            <div class="dotText exitText">x</div>
        </div>

        <div class="dash dotCircle">
            <div class="dotText dashText">-</div>
        </div>

        <div class="expand dotCircle">
            <div class="dotText expandText">+</div>
        </div>

        <div class="blankInIconsArea"></div>


    </div>

    <div class="results">
        0

    </div>

    <div class="firstRow">
        <div class="AC gray1 btnBorder">
            <div class="ACVal textCentered textBlack">AC</div>
        </div>
        <div class="plusminus gray1 btnBorder">
            <div class="textCentered textBlack">+/-</div>
        </div>
        <div class="percent gray1 btnBorder">
            <div class="textCentered textBlack">%</div>
        </div>
        <div class="divider  operator orangeBox btnBorder">
            <div class="textCentered textWhite">÷</div>
        </div>

    </div>

    <div class="secondRow">
        <div class="seven gray2 btnBorder">
            <div value="7" class="numBtn textCentered textBlack">7</div>
        </div>
        <div class="eight gray2 btnBorder">
            <div value="8" class="numBtn textCentered textBlack">8</div>
        </div>
        <div class="nine gray2 btnBorder">
            <div value="9" class="numBtn textCentered textBlack">9</div>
        </div>
        <div class="multiplier operator orangeBox btnBorder">
            <div class="textCentered textWhite">x</div>
        </div>


    </div>

    <div class="thirdRow">
        <div class="four gray2 btnBorder">
            <div value="4" class="numBtn textCentered textBlack">4</div>
        </div>
        <div class="five gray2 btnBorder">
            <div value="5" class="numBtn textCentered textBlack">5</div>
        </div>
        <div class="six gray2 btnBorder">
            <div value="6" class="numBtn textCentered textBlack">6</div>
        </div>
        <div class="minus operator orangeBox btnBorder">
            <div class="textCentered textWhite">-</div>
        </div>


    </div>

    <div class="fourthRow">
        <div class="one gray2 btnBorder">
            <div value="1" class="numBtn textCentered textBlack">1</div>
        </div>
        <div class="two gray2 btnBorder">
            <div value="2" class="numBtn textCentered textBlack">2</div>
        </div>
        <div class="three gray2 btnBorder">
            <div value="3" class="numBtn textCentered textBlack">3</div>
        </div>
        <div class="plus operator orangeBox btnBorder">
            <div class="textCentered textWhite">+</div>
        </div>


    </div>

    <div class="fifthRow">
        <div class="zero gray2 btnBorder">
            <div value="0" class="numBtn textBlack"> &nbsp; &nbsp; &nbsp; &nbsp; 0</div>
        </div>

        <div class="dot gray2 btnBorder">
            <div class="textCentered textBlack">.</div>
        </div>
        <div class="equal operator orangeBox btnBorder">
            <div class="textCentered textWhite">=</div>
        </div>


    </div>


</div>

</body>
</html>