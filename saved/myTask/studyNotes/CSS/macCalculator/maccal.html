<!DOCTYPE html>
<html lang="en">
<head>

    <script
            src="https://code.jquery.com/jquery-3.3.1.js"
            integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
            crossorigin="anonymous"></script>


    <meta charset="UTF-8">
    <title>calculator</title>

    <style>

        .total {
            width: 20%;
            /*width:1156px;*/
            border-style: groove;
        }

        .circularIconsArea:after, .results:after, .firstRow:after,
        .secondRow:after, .thirdRow:after, .fourthRow:after, .fifthRow:after {
            content: "";
            display: block;
            clear: both;

        }

        .exit, .dash, .expand  {
            float: left;
            width: 10%;
        }


        .blankInIconsArea {
            float: left;
            width: 70%;
        }



        .AC, .plusminus, .percent, .divider, .seven, .eight,
        .nine, .multiplier, .four, .five, .six, .minus, .one,
        .two, .three, .plus,  .equal
        {
            float: left;
            width: 25%;
        }


        .zero {
            float: left;
            width: 50%;

            text-align: left;

        }

        .dot {
            float: left;
            width: 25%;

            font-weight: bold;

        }

        

        .dotCircle {
            height: 15px;
            width: 15px;

            border-radius: 50%;
            display: inline-block;
            text-align: center;

            padding: 2px;
            margin: 8px;
        }

        .exit {
            background-color: #ff0000;

        }

        .exitText {
            font-size: 90%;
        }

        .dash {
            background-color: #ffc53f;

        }

        .dashText {
            font-size: 100%;
            text-align: center;
        }

        .expand {
            background-color: #38bf00;
            text-align: center;

        }

        .expandText {
            font-size: 90%;
            text-align: center;
        }

        .circularIconsArea {
            background-color: #969696;
            opacity: 0.8;

        }

        .results {
            background-color: #969696;
            opacity: 0.8;

            height: 30px;

            text-align: right;
            line-height: 1.8;
            color: white;
            font-weight: lighter;
            font-size: 55px;

            padding-right: 20px;
            padding-bottom: 60px;
        }

        .textWhite {
            color: white;
            background-color: #ff8000;
            opacity: 0.8;

            line-height: 1.8;

            font-size: 20px;

            padding-top: 10px;
            padding-bottom: 10px;

        }

        .textBlack {
            color: black;

            line-height: 1.8;

            font-size: 20px;

            padding-top: 10px;
            padding-bottom: 10px;

        }

        .gray1 {
            background-color: #dddddd;
            opacity: 1;
        }

        .gray2 {
            background-color: #dddddd;
            opacity: 0.7;

        }

        .textCentered {
            text-align: center;
        }

        .zeroInside{
            padding-left: 20%;
        }


        /*.btnBorder {*/
            /*border : 0.5px black solid;*/
            /*border-collapse: collapse;*/

        /*}*/


    </style>


    <script>


        let operand1 = 0;
        let operand2 = 0;
        let operator = null;


        $(function () {

            /*
                let test = /(\d)+[.](\d)+/;
                console.log(test.test("123.0"));    // true
                console.log(test.test("123"));      // false

            */


            //원형 아이콘의 텍스트가 처음에 보이지 않도록 설정.
            $(".dotText").hide();

            //원형 아이콘 위에 마우스가 위치하면 아이콘의 텍스트가 나타나도록 설정.
            $(".dotCircle").mouseenter(function () {
                $(".dotText").show()
                //등장했던 텍스트가 다시 사라지도록 설정.
            }).mouseleave(function () {
                $(".dotText").hide();
            });

            //숫자가 입력되면 AC가 C로 변해야 한다.
            //C에서 버튼이 눌리면 결과창의 숫자가 0이 되어야 한다. 변수도 초기화 해야 한다.
            $(function () {
                if ($(".results").text() != '0') {
                    $(".ACVal").text("C");
                } else if ($(".results").text == '0') {
                    $(".ACVal").text("AC");
                }

                $(".ACVal").click(function(){
                   if($(".results").text() != '0' ){
                       $(".results").text('0');
                   }
                });



            });



            //숫자 버튼이 눌리면 이를 갱신해 가면서 저장해 두어야 한다.
            $(".numBtn").click(function () {

                //아직 입력된 연산자가 없다면.
                if (operator == null) {

                    //operand1의 소수점 이하가 존재하지 않는 경우.
                    let testRegex = /(\d)+[\.](\d)+/;

                    if (!testRegex.test(operand1)) {

                        operand1 = (10 * parseInt(operand1)) + parseInt($(this).attr('value'));

                    } else {
                        operand1 = (10 * parseFloat(operand1)) + parseFloat($(this).attr('value'));
                    }

                    $(".results").text(operand1);


                }
                //이미 입력된 연산자 존재.
                else{
                    let testRegex = /(\d)+[\.](\d)+/;

                    if(!testRegex.test(operand2)){
                        operand2 = (10 * parseInt(operand2)) + parseInt($(this).attr('value'));

                    }else{
                        operand2 = (10 * parseFloat(operand2)) + parseFloat($(this).attr('value'));
                    }

                    $(".results").text(operand2);


                }



                //소수점이 입력되었을 때의 처리
                $(".decimalPoint").click(function () {

                    let testRegex = /(\d)+[\.](\d)+/;

                    //입력된 연산자의 존재 여부
                    if(operator == null){


                        //operand1의 소수점 이하가 존재하지 않는 경우.
                        if (!testRegex.test(operand1)){

                           operand1 = operand1 + $(this).attr('value');

                        }else{
                            //어떤 연산도 불필요.

                        }
                    }
                    //이미 입력된 연산자 존재.
                    else{
                        if(!testRegex.test(operand2)){

                            operand2 = operand2 + $(this).attr('value');
                        }else{
                            //어떤 연산도 불필요.
                        }
                    }

                });


            });












        });






    </script>
</head>
<body>
<div class="total">

    <div class="circularIconsArea">
        <div class="exit dotCircle">
            <div class="dotText exitText">x</div>
        </div>

        <div class="dash dotCircle">
            <div class="dotText dashText">-</div>
        </div>

        <div class="expand dotCircle">
            <div class="dotText expandText">+</div>
        </div>

        <div class="blankInIconsArea"></div>


    </div>

    <div class="results">
        0

    </div>

    <div class="firstRow">
        <!--$(".AC.gray1 .ACVal")-->
        <div class="AC gray1 ">
            <div class="ACVal textCentered textBlack btnBorder">AC</div>
        </div>
        <div class="plusminus gray1 ">
            <div class="textCentered textBlack btnBorder">+/-</div>
        </div>
        <div class="percent gray1 ">
            <div class="textCentered textBlack ">%</div>
        </div>
        <div class="divider  operator orangeBox ">
            <div class="textCentered textWhite btnBorder">÷</div>
        </div>

    </div>

    <div class="secondRow">
        <div class="seven gray2 ">
            <div value="7" class="numBtn textCentered textBlack btnBorder">7</div>
        </div>
        <div class="eight gray2 ">
            <div value="8" class="numBtn textCentered textBlack btnBorder">8</div>
        </div>
        <div class="nine gray2 ">
            <div value="9" class="numBtn textCentered textBlack btnBorder">9</div>
        </div>
        <div class="multiplier operator orangeBox ">
            <div class="textCentered textWhite btnBorder">x</div>
        </div>


    </div>

    <div class="thirdRow">
        <div class="four gray2 ">
            <div value="4" class="numBtn textCentered textBlack btnBorder">4</div>
        </div>
        <div class="five gray2 ">
            <div value="5" class="numBtn textCentered textBlack btnBorder">5</div>
        </div>
        <div class="six gray2 ">
            <div value="6" class="numBtn textCentered textBlack btnBorder">6</div>
        </div>
        <div class="minus operator orangeBox ">
            <div class="textCentered textWhite btnBorder">-</div>
        </div>


    </div>

    <div class="fourthRow">
        <div class="one gray2 ">
            <div value="1" class="numBtn textCentered textBlack btnBorder">1</div>
        </div>
        <div class="two gray2 ">
            <div value="2" class="numBtn textCentered textBlack btnBorder">2</div>
        </div>
        <div class="three gray2 ">
            <div value="3" class="numBtn textCentered textBlack btnBorder">3</div>
        </div>
        <div class="plus operator orangeBox ">
            <div class="textCentered textWhite btnBorder">+</div>
        </div>


    </div>

    <div class="fifthRow">
        <div class="zero gray2 ">
            <div value="0" class="numBtn textBlack btnBorder zeroInside">0</div>
        </div>

        <div class="dot gray2 ">
            <div value="." class="textCentered textBlack btnBorder
                                  decimalPoint">.</div>
        </div>
        <div class="equal operator orangeBox ">
            <div class="textCentered textWhite btnBorder">=</div>
        </div>


    </div>


</div>

</body>
</html>